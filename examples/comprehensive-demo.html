<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js-use-core ç»¼åˆæ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .demo-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .demo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .demo-card h2 {
            margin-bottom: 20px;
            color: #fff;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .demo-card .icon {
            font-size: 1.8rem;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.4);
        }
        
        input::placeholder, textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        button:disabled {
            background: rgba(255, 255, 255, 0.2);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        button.secondary {
            background: linear-gradient(45deg, #2196F3, #1976D2);
        }
        
        button.danger {
            background: linear-gradient(45deg, #f44336, #d32f2f);
        }
        
        .status-panel {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .status-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .status-label {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .status-value {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 350px;
        }
        
        .message.show {
            transform: translateX(0);
        }
        
        .message.success {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }
        
        .message.error {
            background: linear-gradient(45deg, #f44336, #d32f2f);
        }
        
        .message.warning {
            background: linear-gradient(45deg, #ff9800, #f57c00);
        }
        
        .fullscreen-demo {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 15px 0;
        }
        
        .fullscreen-demo:hover {
            transform: scale(1.02);
        }
        
        .font-demo {
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            font-size: 18px;
            transition: all 0.3s ease;
        }
        
        .copyable-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .copyable-content:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        .device-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .device-info-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .performance-chart {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .performance-bar {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .performance-label {
            width: 100px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .performance-value {
            flex: 1;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 0 10px;
        }
        
        .performance-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            transition: width 0.3s ease;
        }
        
        .performance-text {
            font-size: 12px;
            color: #4CAF50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ js-use-core ç»¼åˆæ¼”ç¤º</h1>
        
        <div class="demo-grid">
            <!-- å…¨å±åŠŸèƒ½æ¼”ç¤º -->
            <div class="demo-card">
                <h2><span class="icon">ğŸ–¥ï¸</span>å…¨å±åŠŸèƒ½</h2>
                <div class="fullscreen-demo" id="fullscreenDemo">
                    <h3>ç‚¹å‡»è¿›å…¥å…¨å±æ¨¡å¼</h3>
                    <p>æ”¯æŒé¡µé¢å’Œå…ƒç´ å…¨å±</p>
                </div>
                <div class="button-group">
                    <button id="requestFullscreen">é¡µé¢å…¨å±</button>
                    <button id="requestElementFullscreen" class="secondary">å…ƒç´ å…¨å±</button>
                    <button id="exitFullscreen" class="danger">é€€å‡ºå…¨å±</button>
                </div>
                <div class="status-panel" id="fullscreenStatus">
                    <div class="status-item">
                        <span class="status-label">æ”¯æŒçŠ¶æ€:</span>
                        <span class="status-value" id="fullscreenSupported">æ£€æµ‹ä¸­...</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">å½“å‰çŠ¶æ€:</span>
                        <span class="status-value" id="fullscreenCurrent">æ£€æµ‹ä¸­...</span>
                    </div>
                </div>
            </div>
            
            <!-- å‰ªè´´æ¿åŠŸèƒ½æ¼”ç¤º -->
            <div class="demo-card">
                <h2><span class="icon">ğŸ“‹</span>å‰ªè´´æ¿åŠŸèƒ½</h2>
                <div class="input-group">
                    <label for="clipboardText">æ–‡æœ¬å†…å®¹:</label>
                    <input type="text" id="clipboardText" placeholder="è¾“å…¥è¦å¤åˆ¶çš„æ–‡æœ¬" value="Hello, js-use-core!">
                </div>
                <div class="input-group">
                    <label for="clipboardHtml">HTML å†…å®¹:</label>
                    <textarea id="clipboardHtml" rows="3" placeholder="è¾“å…¥ HTML å†…å®¹"><strong>ç²—ä½“æ–‡æœ¬</strong> å’Œ <em>æ–œä½“æ–‡æœ¬</em></textarea>
                </div>
                <div class="copyable-content" id="copyableContent">
                    <h4>å¯å¤åˆ¶çš„å†…å®¹</h4>
                    <p>ç‚¹å‡»è¿™ä¸ªåŒºåŸŸå¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿</p>
                </div>
                <div class="button-group">
                    <button id="copyText">å¤åˆ¶æ–‡æœ¬</button>
                    <button id="copyHtml" class="secondary">å¤åˆ¶ HTML</button>
                    <button id="readClipboard" class="secondary">è¯»å–å‰ªè´´æ¿</button>
                </div>
                <div class="status-panel" id="clipboardStatus">
                    <div class="status-item">
                        <span class="status-label">API æ”¯æŒ:</span>
                        <span class="status-value" id="clipboardSupported">æ£€æµ‹ä¸­...</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">æœ€åæ“ä½œ:</span>
                        <span class="status-value" id="clipboardLastAction">æ— </span>
                    </div>
                </div>
            </div>
            
            <!-- å­—ä½“åŠŸèƒ½æ¼”ç¤º -->
            <div class="demo-card">
                <h2><span class="icon">ğŸ”¤</span>å­—ä½“åŠŸèƒ½</h2>
                <div class="input-group">
                    <label for="fontName">å­—ä½“åç§°:</label>
                    <input type="text" id="fontName" placeholder="è¾“å…¥å­—ä½“åç§°" value="Arial">
                </div>
                <div class="input-group">
                    <label for="fontUrl">å­—ä½“ URL (å¯é€‰):</label>
                    <input type="text" id="fontUrl" placeholder="è¾“å…¥å­—ä½“æ–‡ä»¶ URL">
                </div>
                <div class="font-demo" id="fontDemo" style="font-family: Arial;">
                    è¿™æ˜¯å­—ä½“æ¼”ç¤ºæ–‡æœ¬ - Font Demo Text
                </div>
                <div class="button-group">
                    <button id="checkFont">æ£€æŸ¥å­—ä½“</button>
                    <button id="addFont" class="secondary">æ·»åŠ å­—ä½“</button>
                    <button id="checkMultipleFonts" class="secondary">æ‰¹é‡æ£€æŸ¥</button>
                </div>
                <div class="status-panel" id="fontStatus">
                    <div class="status-item">
                        <span class="status-label">æ£€æŸ¥ç»“æœ:</span>
                        <span class="status-value" id="fontCheckResult">æœªæ£€æŸ¥</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">åŠ è½½æ—¶é—´:</span>
                        <span class="status-value" id="fontLoadTime">-</span>
                    </div>
                </div>
            </div>
            
            <!-- URL åŠŸèƒ½æ¼”ç¤º -->
            <div class="demo-card">
                <h2><span class="icon">ğŸ”—</span>URL åŠŸèƒ½</h2>
                <div class="input-group">
                    <label for="urlInput">URL åœ°å€:</label>
                    <input type="text" id="urlInput" placeholder="è¾“å…¥ URL" value="https://example.com/api">
                </div>
                <div class="input-group">
                    <label for="queryKey">æŸ¥è¯¢å‚æ•°é”®:</label>
                    <input type="text" id="queryKey" placeholder="å‚æ•°å" value="page">
                </div>
                <div class="input-group">
                    <label for="queryValue">æŸ¥è¯¢å‚æ•°å€¼:</label>
                    <input type="text" id="queryValue" placeholder="å‚æ•°å€¼" value="1">
                </div>
                <div class="button-group">
                    <button id="parseUrl">è§£æ URL</button>
                    <button id="addQuery" class="secondary">æ·»åŠ å‚æ•°</button>
                    <button id="buildUrl" class="secondary">æ„å»º URL</button>
                </div>
                <div class="status-panel" id="urlStatus">
                    <div class="status-item">
                        <span class="status-label">è§£æç»“æœ:</span>
                        <span class="status-value" id="urlParseResult">æœªè§£æ</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">æ„å»ºç»“æœ:</span>
                        <span class="status-value" id="urlBuildResult">-</span>
                    </div>
                </div>
            </div>
            
            <!-- è®¾å¤‡æ£€æµ‹æ¼”ç¤º -->
            <div class="demo-card">
                <h2><span class="icon">ğŸ“±</span>è®¾å¤‡æ£€æµ‹</h2>
                <div class="button-group">
                    <button id="detectDevice">æ£€æµ‹è®¾å¤‡</button>
                    <button id="refreshDeviceInfo" class="secondary">åˆ·æ–°ä¿¡æ¯</button>
                </div>
                <div class="device-info" id="deviceInfo">
                    <div class="device-info-item">
                        <div>è®¾å¤‡ç±»å‹</div>
                        <div id="deviceType">æ£€æµ‹ä¸­...</div>
                    </div>
                    <div class="device-info-item">
                        <div>æ“ä½œç³»ç»Ÿ</div>
                        <div id="deviceOS">æ£€æµ‹ä¸­...</div>
                    </div>
                    <div class="device-info-item">
                        <div>æµè§ˆå™¨</div>
                        <div id="deviceBrowser">æ£€æµ‹ä¸­...</div>
                    </div>
                    <div class="device-info-item">
                        <div>å±å¹•å°ºå¯¸</div>
                        <div id="deviceScreen">æ£€æµ‹ä¸­...</div>
                    </div>
                </div>
            </div>
            
            <!-- User Agent è§£ææ¼”ç¤º -->
            <div class="demo-card">
                <h2><span class="icon">ğŸ”</span>User Agent è§£æ</h2>
                <div class="input-group">
                    <label for="uaInput">User Agent å­—ç¬¦ä¸²:</label>
                    <textarea id="uaInput" rows="3" placeholder="è¾“å…¥ User Agent å­—ç¬¦ä¸²"></textarea>
                </div>
                <div class="button-group">
                    <button id="parseUA">è§£æ UA</button>
                    <button id="getCurrentUA" class="secondary">è·å–å½“å‰ UA</button>
                    <button id="compareUA" class="secondary">ç‰ˆæœ¬æ¯”è¾ƒ</button>
                </div>
                <div class="status-panel" id="uaStatus">
                    <div class="status-item">
                        <span class="status-label">æµè§ˆå™¨:</span>
                        <span class="status-value" id="uaBrowser">æœªè§£æ</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">ç‰ˆæœ¬:</span>
                        <span class="status-value" id="uaVersion">-</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">æ“ä½œç³»ç»Ÿ:</span>
                        <span class="status-value" id="uaOS">-</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æ€§èƒ½ç›‘æ§é¢æ¿ -->
        <div class="demo-card">
            <h2><span class="icon">ğŸ“Š</span>æ€§èƒ½ç›‘æ§</h2>
            <div class="performance-chart" id="performanceChart">
                <div class="performance-bar">
                    <div class="performance-label">å…¨å±æ“ä½œ</div>
                    <div class="performance-value">
                        <div class="performance-fill" id="fullscreenPerf" style="width: 0%"></div>
                    </div>
                    <div class="performance-text" id="fullscreenPerfText">0ms</div>
                </div>
                <div class="performance-bar">
                    <div class="performance-label">å‰ªè´´æ¿æ“ä½œ</div>
                    <div class="performance-value">
                        <div class="performance-fill" id="clipboardPerf" style="width: 0%"></div>
                    </div>
                    <div class="performance-text" id="clipboardPerfText">0ms</div>
                </div>
                <div class="performance-bar">
                    <div class="performance-label">å­—ä½“æ£€æµ‹</div>
                    <div class="performance-value">
                        <div class="performance-fill" id="fontPerf" style="width: 0%"></div>
                    </div>
                    <div class="performance-text" id="fontPerfText">0ms</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- å¼•å…¥ js-use-core åº“ -->
    <script src="../dist/index.umd.js"></script>
    
    <script>
        // å…¨å±€ç®¡ç†å™¨å®ä¾‹
        let managers = {
            fullscreen: null,
            clipboard: null,
            font: null,
            url: null,
            device: null
        };
        
        // æ¶ˆæ¯æ˜¾ç¤ºå‡½æ•°
        function showMessage(message, type = 'success') {
            const messageEl = document.createElement('div');
            messageEl.className = `message ${type}`;
            messageEl.textContent = message;
            document.body.appendChild(messageEl);
            
            setTimeout(() => messageEl.classList.add('show'), 100);
            
            setTimeout(() => {
                messageEl.classList.remove('show');
                setTimeout(() => document.body.removeChild(messageEl), 300);
            }, 3000);
        }
        
        // æ›´æ–°æ€§èƒ½å›¾è¡¨
        function updatePerformanceChart(module, time) {
            const maxTime = 1000; // æœ€å¤§æ—¶é—´ 1000ms
            const percentage = Math.min((time / maxTime) * 100, 100);
            
            const fillEl = document.getElementById(`${module}Perf`);
            const textEl = document.getElementById(`${module}PerfText`);
            
            if (fillEl && textEl) {
                fillEl.style.width = percentage + '%';
                textEl.textContent = time + 'ms';
            }
        }
        
        // åˆå§‹åŒ–æ‰€æœ‰ç®¡ç†å™¨
        async function initializeManagers() {
            try {
                // åˆå§‹åŒ–å…¨å±ç®¡ç†å™¨
                if (jsUseCore.FullscreenManager) {
                    managers.fullscreen = new jsUseCore.FullscreenManager({
                        enablePerformanceMonitoring: true,
                        debug: true
                    });
                    await managers.fullscreen.initialize();
                    
                    managers.fullscreen.on('change', () => {
                        updateFullscreenStatus();
                    });
                    
                    managers.fullscreen.on('request', () => {
                        const perfData = managers.fullscreen.performanceData;
                        updatePerformanceChart('fullscreen', perfData.enterTime);
                    });
                }
                
                // åˆå§‹åŒ–å‰ªè´´æ¿ç®¡ç†å™¨
                if (jsUseCore.ClipboardManager) {
                    managers.clipboard = new jsUseCore.ClipboardManager({
                        enablePermissionCheck: true,
                        enableFallback: true,
                        debug: true
                    });
                    await managers.clipboard.initialize();
                    
                    managers.clipboard.on('copy', (data) => {
                        document.getElementById('clipboardLastAction').textContent = 
                            `å¤åˆ¶ ${data.type} (${data.size} å­—èŠ‚)`;
                    });
                }
                
                // åˆå§‹åŒ–å­—ä½“ç®¡ç†å™¨
                if (jsUseCore.FontManager) {
                    managers.font = new jsUseCore.FontManager({
                        timeout: 3000,
                        cache: true,
                        debug: true
                    });
                    await managers.font.initialize();
                    
                    managers.font.on('fontLoaded', (data) => {
                        showMessage(`å­—ä½“ ${data.fontName} åŠ è½½æˆåŠŸ`);
                        updatePerformanceChart('font', data.loadTime);
                    });
                }
                
                // åˆå§‹åŒ– URL ç®¡ç†å™¨
                if (jsUseCore.UrlManager) {
                    managers.url = new jsUseCore.UrlManager();
                }
                
                // åˆå§‹åŒ–è®¾å¤‡æ£€æµ‹å™¨
                if (jsUseCore.DeviceDetector) {
                    managers.device = new jsUseCore.DeviceDetector();
                    await managers.device.initialize();
                }
                
                // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
                updateAllStatus();
                showMessage('æ‰€æœ‰ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ');
                
            } catch (error) {
                console.error('åˆå§‹åŒ–ç®¡ç†å™¨å¤±è´¥:', error);
                showMessage('åˆå§‹åŒ–å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // æ›´æ–°å…¨å±çŠ¶æ€
        function updateFullscreenStatus() {
            if (managers.fullscreen) {
                document.getElementById('fullscreenSupported').textContent = 
                    managers.fullscreen.isSupported ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ';
                document.getElementById('fullscreenCurrent').textContent = 
                    managers.fullscreen.isFullscreen ? 'å…¨å±ä¸­' : 'æ­£å¸¸';
            }
        }
        
        // æ›´æ–°å‰ªè´´æ¿çŠ¶æ€
        function updateClipboardStatus() {
            if (managers.clipboard) {
                document.getElementById('clipboardSupported').textContent = 
                    managers.clipboard.isSupported ? 'æ”¯æŒ' : 'ä¸æ”¯æŒ';
            }
        }
        
        // æ›´æ–°æ‰€æœ‰çŠ¶æ€
        function updateAllStatus() {
            updateFullscreenStatus();
            updateClipboardStatus();
            
            // è®¾ç½®å½“å‰ UA
            if (navigator.userAgent) {
                document.getElementById('uaInput').value = navigator.userAgent;
            }
        }
        
        // ç»‘å®šå…¨å±äº‹ä»¶
        document.getElementById('requestFullscreen').addEventListener('click', async () => {
            if (!managers.fullscreen) return;
            try {
                await managers.fullscreen.request();
                showMessage('å·²è¿›å…¥å…¨å±æ¨¡å¼');
            } catch (error) {
                showMessage('å…¨å±å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('requestElementFullscreen').addEventListener('click', async () => {
            if (!managers.fullscreen) return;
            try {
                const element = document.getElementById('fullscreenDemo');
                await managers.fullscreen.request(element);
                showMessage('å…ƒç´ å·²è¿›å…¥å…¨å±æ¨¡å¼');
            } catch (error) {
                showMessage('å…ƒç´ å…¨å±å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('exitFullscreen').addEventListener('click', async () => {
            if (!managers.fullscreen) return;
            try {
                await managers.fullscreen.exit();
                showMessage('å·²é€€å‡ºå…¨å±æ¨¡å¼');
            } catch (error) {
                showMessage('é€€å‡ºå…¨å±å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        // ç‚¹å‡»æ¼”ç¤ºåŒºåŸŸè¿›å…¥å…¨å±
        document.getElementById('fullscreenDemo').addEventListener('click', async () => {
            if (!managers.fullscreen) return;
            try {
                await managers.fullscreen.toggle(document.getElementById('fullscreenDemo'));
            } catch (error) {
                showMessage('åˆ‡æ¢å…¨å±å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        // ç»‘å®šå‰ªè´´æ¿äº‹ä»¶
        document.getElementById('copyText').addEventListener('click', async () => {
            if (!managers.clipboard) return;
            try {
                const text = document.getElementById('clipboardText').value;
                await managers.clipboard.copyText(text);
                showMessage('æ–‡æœ¬å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            } catch (error) {
                showMessage('å¤åˆ¶å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('copyHtml').addEventListener('click', async () => {
            if (!managers.clipboard) return;
            try {
                const html = document.getElementById('clipboardHtml').value;
                await managers.clipboard.copyHTML(html);
                showMessage('HTML å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            } catch (error) {
                showMessage('å¤åˆ¶å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('readClipboard').addEventListener('click', async () => {
            if (!managers.clipboard) return;
            try {
                const text = await managers.clipboard.readText();
                showMessage('å‰ªè´´æ¿å†…å®¹: ' + text.substring(0, 50) + (text.length > 50 ? '...' : ''));
            } catch (error) {
                showMessage('è¯»å–å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        // ç‚¹å‡»å¯å¤åˆ¶å†…å®¹
        document.getElementById('copyableContent').addEventListener('click', async () => {
            if (!managers.clipboard) return;
            try {
                const element = document.getElementById('copyableContent');
                await managers.clipboard.copyElement(element);
                showMessage('å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
            } catch (error) {
                showMessage('å¤åˆ¶å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        // ç»‘å®šå­—ä½“äº‹ä»¶
        document.getElementById('checkFont').addEventListener('click', async () => {
            if (!managers.font) return;
            try {
                const fontName = document.getElementById('fontName').value;
                const startTime = performance.now();
                const result = await managers.font.check(fontName);
                const endTime = performance.now();
                
                const font = result.allFonts[0];
                document.getElementById('fontCheckResult').textContent = 
                    font.loaded ? 'å·²åŠ è½½' : 'æœªåŠ è½½';
                document.getElementById('fontLoadTime').textContent = 
                    Math.round(endTime - startTime) + 'ms';
                
                // æ›´æ–°å­—ä½“æ¼”ç¤º
                if (font.loaded) {
                    document.getElementById('fontDemo').style.fontFamily = fontName;
                }
                
                updatePerformanceChart('font', endTime - startTime);
                showMessage(`å­—ä½“æ£€æµ‹å®Œæˆ: ${font.loaded ? 'å·²åŠ è½½' : 'æœªåŠ è½½'}`);
            } catch (error) {
                showMessage('å­—ä½“æ£€æµ‹å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('addFont').addEventListener('click', () => {
            if (!managers.font) return;
            try {
                const fontName = document.getElementById('fontName').value;
                const fontUrl = document.getElementById('fontUrl').value;
                
                if (!fontUrl) {
                    showMessage('è¯·è¾“å…¥å­—ä½“ URL', 'warning');
                    return;
                }
                
                const success = managers.font.addFont(fontName, fontUrl);
                if (success) {
                    showMessage('å­—ä½“æ·»åŠ æˆåŠŸï¼Œæ­£åœ¨åŠ è½½...');
                } else {
                    showMessage('å­—ä½“æ·»åŠ å¤±è´¥', 'error');
                }
            } catch (error) {
                showMessage('æ·»åŠ å­—ä½“å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('checkMultipleFonts').addEventListener('click', async () => {
            if (!managers.font) return;
            try {
                const fonts = ['Arial', 'Helvetica', 'Times New Roman', 'Georgia', 'Verdana'];
                const startTime = performance.now();
                const result = await managers.font.check(fonts);
                const endTime = performance.now();
                
                const loadedCount = result.allFonts.filter(f => f.loaded).length;
                showMessage(`æ‰¹é‡æ£€æµ‹å®Œæˆ: ${loadedCount}/${fonts.length} ä¸ªå­—ä½“å·²åŠ è½½`);
                updatePerformanceChart('font', endTime - startTime);
            } catch (error) {
                showMessage('æ‰¹é‡æ£€æµ‹å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        // ç»‘å®š URL äº‹ä»¶
        document.getElementById('parseUrl').addEventListener('click', () => {
            try {
                const url = document.getElementById('urlInput').value;
                if (managers.url) {
                    managers.url = new jsUseCore.UrlManager(url);
                    const parsed = managers.url.parse();
                    document.getElementById('urlParseResult').textContent = 
                        `${parsed.protocol}//${parsed.host}${parsed.pathname}`;
                    showMessage('URL è§£æå®Œæˆ');
                }
            } catch (error) {
                showMessage('URL è§£æå¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('addQuery').addEventListener('click', () => {
            try {
                const key = document.getElementById('queryKey').value;
                const value = document.getElementById('queryValue').value;
                
                if (managers.url && key && value) {
                    managers.url.addQuery({ [key]: value });
                    document.getElementById('urlBuildResult').textContent = managers.url.toString();
                    showMessage('æŸ¥è¯¢å‚æ•°å·²æ·»åŠ ');
                }
            } catch (error) {
                showMessage('æ·»åŠ å‚æ•°å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('buildUrl').addEventListener('click', () => {
            try {
                if (managers.url) {
                    const built = managers.url.toString();
                    document.getElementById('urlBuildResult').textContent = built;
                    showMessage('URL æ„å»ºå®Œæˆ');
                }
            } catch (error) {
                showMessage('URL æ„å»ºå¤±è´¥: ' + error.message, 'error');
            }
        });
        
        // ç»‘å®šè®¾å¤‡æ£€æµ‹äº‹ä»¶
        document.getElementById('detectDevice').addEventListener('click', async () => {
            if (!managers.device) return;
            try {
                await managers.device.detect();
                updateDeviceInfo();
                showMessage('è®¾å¤‡æ£€æµ‹å®Œæˆ');
            } catch (error) {
                showMessage('è®¾å¤‡æ£€æµ‹å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('refreshDeviceInfo').addEventListener('click', () => {
            updateDeviceInfo();
            showMessage('è®¾å¤‡ä¿¡æ¯å·²åˆ·æ–°');
        });
        
        function updateDeviceInfo() {
            if (managers.device) {
                document.getElementById('deviceType').textContent = 
                    managers.device.isMobile ? 'ç§»åŠ¨è®¾å¤‡' : 
                    managers.device.isTablet ? 'å¹³æ¿è®¾å¤‡' : 'æ¡Œé¢è®¾å¤‡';
                document.getElementById('deviceOS').textContent = 
                    managers.device.os?.name || 'æœªçŸ¥';
                document.getElementById('deviceBrowser').textContent = 
                    managers.device.browser?.name || 'æœªçŸ¥';
                document.getElementById('deviceScreen').textContent = 
                    `${screen.width}x${screen.height}`;
            }
        }
        
        // ç»‘å®š UA è§£æäº‹ä»¶
        document.getElementById('parseUA').addEventListener('click', () => {
            try {
                const uaString = document.getElementById('uaInput').value;
                if (jsUseCore.UA && uaString) {
                    const parsed = jsUseCore.UA.parse(uaString);
                    document.getElementById('uaBrowser').textContent = 
                        parsed.browser?.name || 'æœªçŸ¥';
                    document.getElementById('uaVersion').textContent = 
                        parsed.browser?.version || 'æœªçŸ¥';
                    document.getElementById('uaOS').textContent = 
                        parsed.os?.name || 'æœªçŸ¥';
                    showMessage('User Agent è§£æå®Œæˆ');
                }
            } catch (error) {
                showMessage('UA è§£æå¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('getCurrentUA').addEventListener('click', () => {
            try {
                if (jsUseCore.UA) {
                    const current = jsUseCore.UA.parse(navigator.userAgent);
                    document.getElementById('uaBrowser').textContent = 
                        current.browser?.name || 'æœªçŸ¥';
                    document.getElementById('uaVersion').textContent = 
                        current.browser?.version || 'æœªçŸ¥';
                    document.getElementById('uaOS').textContent = 
                        current.os?.name || 'æœªçŸ¥';
                    showMessage('å½“å‰ UA ä¿¡æ¯å·²è·å–');
                }
            } catch (error) {
                showMessage('è·å– UA å¤±è´¥: ' + error.message, 'error');
            }
        });
        
        document.getElementById('compareUA').addEventListener('click', () => {
            try {
                if (jsUseCore.UA) {
                    const current = jsUseCore.UA.parse(navigator.userAgent);
                    const isModern = jsUseCore.UA.satisfies(current, 'Chrome >= 80');
                    showMessage(`æµè§ˆå™¨ç‰ˆæœ¬æ£€æŸ¥: ${isModern ? 'ç°ä»£æµè§ˆå™¨' : 'æ—§ç‰ˆæµè§ˆå™¨'}`);
                }
            } catch (error) {
                showMessage('ç‰ˆæœ¬æ¯”è¾ƒå¤±è´¥: ' + error.message, 'error');
            }
        });
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', async () => {
            showMessage('æ­£åœ¨åˆå§‹åŒ–ç®¡ç†å™¨...', 'warning');
            await initializeManagers();
        });
        
        // é¡µé¢å¸è½½æ—¶æ¸…ç†èµ„æº
        window.addEventListener('beforeunload', () => {
            Object.values(managers).forEach(manager => {
                if (manager && typeof manager.destroy === 'function') {
                    manager.destroy();
                }
            });
        });
    </script>
</body>
</html>