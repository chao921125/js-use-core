<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js-use-core ç»¼åˆä½¿ç”¨ç¤ºä¾‹</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .section h2 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            background: #3498db;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }
        
        button:hover {
            background: #2980b9;
        }
        
        button:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }
        
        input, textarea, select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            margin: 5px;
        }
        
        textarea {
            width: 100%;
            min-height: 100px;
            resize: vertical;
            box-sizing: border-box;
        }
        
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        
        .info-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
        }
        
        .info-item h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }
        
        .info-item p {
            margin: 5px 0;
            font-size: 14px;
        }
        
        .fullscreen-demo {
            background: linear-gradient(45deg, #3498db, #9b59b6);
            color: white;
            padding: 40px;
            text-align: center;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .font-demo {
            font-size: 24px;
            margin: 15px 0;
            padding: 20px;
            background: white;
            border-radius: 6px;
            text-align: center;
        }
        
        .url-demo {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        .url-demo input {
            width: 100%;
            box-sizing: border-box;
        }
        
        .mobile-only {
            display: none;
        }
        
        @media (max-width: 768px) {
            .mobile-only {
                display: block;
            }
            
            .desktop-only {
                display: none;
            }
            
            .controls {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <h1>ğŸš€ js-use-core ç»¼åˆä½¿ç”¨ç¤ºä¾‹</h1>
    <p>è¿™ä¸ªé¡µé¢å±•ç¤ºäº† js-use-core åº“çš„å„ç§åŠŸèƒ½å’Œä½¿ç”¨æ–¹æ³•ã€‚</p>

    <!-- è®¾å¤‡æ£€æµ‹ -->
    <div class="section">
        <h2>ğŸ“± è®¾å¤‡æ£€æµ‹</h2>
        <div class="controls">
            <button onclick="detectDevice()">æ£€æµ‹è®¾å¤‡ä¿¡æ¯</button>
            <button onclick="checkFeatures()">æ£€æŸ¥åŠŸèƒ½æ”¯æŒ</button>
        </div>
        <div id="deviceInfo" class="info-grid"></div>
    </div>

    <!-- å‰ªè´´æ¿åŠŸèƒ½ -->
    <div class="section">
        <h2>ğŸ“‹ å‰ªè´´æ¿åŠŸèƒ½</h2>
        <div class="controls">
            <input type="text" id="clipboardText" placeholder="è¾“å…¥è¦å¤åˆ¶çš„æ–‡æœ¬" value="Hello, js-use-core!">
            <button onclick="copyText()">å¤åˆ¶æ–‡æœ¬</button>
            <button onclick="pasteText()">ç²˜è´´æ–‡æœ¬</button>
            <button onclick="copyHTML()">å¤åˆ¶ HTML</button>
            <button onclick="pasteHTML()">ç²˜è´´ HTML</button>
        </div>
        <textarea id="clipboardResult" placeholder="ç²˜è´´ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ"></textarea>
        <div id="clipboardStatus"></div>
    </div>

    <!-- å…¨å±åŠŸèƒ½ -->
    <div class="section">
        <h2>ğŸ–¥ï¸ å…¨å±åŠŸèƒ½</h2>
        <div class="controls">
            <button onclick="requestFullscreen()">è¿›å…¥å…¨å±</button>
            <button onclick="exitFullscreen()">é€€å‡ºå…¨å±</button>
            <button onclick="toggleFullscreen()">åˆ‡æ¢å…¨å±</button>
        </div>
        <div class="fullscreen-demo" id="fullscreenDemo">
            <h3>å…¨å±æ¼”ç¤ºåŒºåŸŸ</h3>
            <p>ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ä½“éªŒå…¨å±åŠŸèƒ½</p>
            <p id="fullscreenStatus">å½“å‰çŠ¶æ€: éå…¨å±</p>
        </div>
    </div>

    <!-- å­—ä½“ç®¡ç† -->
    <div class="section">
        <h2>ğŸ”¤ å­—ä½“ç®¡ç†</h2>
        <div class="controls">
            <button onclick="checkFonts()">æ£€æŸ¥ç³»ç»Ÿå­—ä½“</button>
            <button onclick="loadCustomFont()">åŠ è½½è‡ªå®šä¹‰å­—ä½“</button>
            <select id="fontSelect" onchange="changeFontDemo()">
                <option value="Arial">Arial</option>
                <option value="Helvetica">Helvetica</option>
                <option value="Times New Roman">Times New Roman</option>
                <option value="Georgia">Georgia</option>
                <option value="Verdana">Verdana</option>
            </select>
        </div>
        <div class="font-demo" id="fontDemo">
            å­—ä½“æ¼”ç¤ºæ–‡æœ¬ - Font Demo Text
        </div>
        <div id="fontStatus"></div>
    </div>

    <!-- URL ç®¡ç† -->
    <div class="section">
        <h2>ğŸŒ URL ç®¡ç†</h2>
        <div class="url-demo">
            <input type="text" id="urlInput" placeholder="è¾“å…¥ URL" value="https://example.com/api/users">
            <div class="controls">
                <button onclick="parseUrl()">è§£æ URL</button>
                <button onclick="addQueryParams()">æ·»åŠ æŸ¥è¯¢å‚æ•°</button>
                <button onclick="buildUrl()">æ„å»º URL</button>
                <button onclick="normalizeUrl()">æ ‡å‡†åŒ– URL</button>
            </div>
            <div id="urlResult"></div>
        </div>
    </div>

    <!-- User Agent è§£æ -->
    <div class="section">
        <h2>ğŸ” User Agent è§£æ</h2>
        <div class="controls">
            <button onclick="parseUserAgent()">è§£æå½“å‰ UA</button>
            <button onclick="checkBrowserCompatibility()">æ£€æŸ¥æµè§ˆå™¨å…¼å®¹æ€§</button>
            <button onclick="generateUA()">ç”Ÿæˆè‡ªå®šä¹‰ UA</button>
        </div>
        <div id="uaResult"></div>
    </div>

    <!-- æ–‡ä»¶å¤„ç† -->
    <div class="section">
        <h2>ğŸ“ æ–‡ä»¶å¤„ç†</h2>
        <div class="controls">
            <input type="file" id="fileInput" accept="image/*,text/*">
            <button onclick="processFile()">å¤„ç†æ–‡ä»¶</button>
            <button onclick="convertToBase64()">è½¬æ¢ä¸º Base64</button>
        </div>
        <div id="fileResult"></div>
    </div>

    <!-- ç½‘ç»œçŠ¶æ€ -->
    <div class="section">
        <h2>ğŸŒ ç½‘ç»œçŠ¶æ€</h2>
        <div class="controls">
            <button onclick="checkNetworkStatus()">æ£€æŸ¥ç½‘ç»œçŠ¶æ€</button>
            <button onclick="monitorNetwork()">ç›‘æ§ç½‘ç»œå˜åŒ–</button>
        </div>
        <div id="networkStatus"></div>
    </div>

    <!-- æ€§èƒ½ç›‘æ§ -->
    <div class="section">
        <h2>ğŸ“Š æ€§èƒ½ç›‘æ§</h2>
        <div class="controls">
            <button onclick="runPerformanceTest()">è¿è¡Œæ€§èƒ½æµ‹è¯•</button>
            <button onclick="getMemoryInfo()">è·å–å†…å­˜ä¿¡æ¯</button>
        </div>
        <div id="performanceResult"></div>
    </div>

    <script type="module">
        import { 
            ClipboardManager,
            FullscreenManager,
            FontManager,
            DeviceDetector,
            UrlManager,
            UA,
            FileManager
        } from './dist/index.js';

        // å…¨å±€ç®¡ç†å™¨å®ä¾‹
        window.managers = {
            clipboard: new ClipboardManager({ debug: true }),
            fullscreen: new FullscreenManager({ debug: true }),
            font: new FontManager({ debug: true }),
            device: new DeviceDetector({ debug: true }),
            file: new FileManager({ debug: true })
        };

        // å·¥å…·å‡½æ•°
        window.showStatus = function(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="status ${type}">${message}</div>`;
            setTimeout(() => {
                element.innerHTML = '';
            }, 5000);
        };

        window.formatJSON = function(obj) {
            return JSON.stringify(obj, null, 2);
        };

        // è®¾å¤‡æ£€æµ‹åŠŸèƒ½
        window.detectDevice = async function() {
            try {
                const deviceInfo = await window.managers.device.getDeviceInfo();
                const infoGrid = document.getElementById('deviceInfo');
                
                infoGrid.innerHTML = `
                    <div class="info-item">
                        <h4>åŸºæœ¬ä¿¡æ¯</h4>
                        <p><strong>è®¾å¤‡ç±»å‹:</strong> ${deviceInfo.type}</p>
                        <p><strong>ç§»åŠ¨è®¾å¤‡:</strong> ${deviceInfo.isMobile ? 'æ˜¯' : 'å¦'}</p>
                        <p><strong>å¹³æ¿è®¾å¤‡:</strong> ${deviceInfo.isTablet ? 'æ˜¯' : 'å¦'}</p>
                        <p><strong>è§¦æ‘¸è®¾å¤‡:</strong> ${deviceInfo.isTouchDevice ? 'æ˜¯' : 'å¦'}</p>
                    </div>
                    <div class="info-item">
                        <h4>æ“ä½œç³»ç»Ÿ</h4>
                        <p><strong>åç§°:</strong> ${deviceInfo.os.name}</p>
                        <p><strong>ç‰ˆæœ¬:</strong> ${deviceInfo.os.version}</p>
                        <p><strong>å¹³å°:</strong> ${deviceInfo.os.platform}</p>
                    </div>
                    <div class="info-item">
                        <h4>æµè§ˆå™¨</h4>
                        <p><strong>åç§°:</strong> ${deviceInfo.browser.name}</p>
                        <p><strong>ç‰ˆæœ¬:</strong> ${deviceInfo.browser.version}</p>
                        <p><strong>å¼•æ“:</strong> ${deviceInfo.browser.engine}</p>
                    </div>
                    <div class="info-item">
                        <h4>å±å¹•ä¿¡æ¯</h4>
                        <p><strong>å°ºå¯¸:</strong> ${deviceInfo.screen.width} Ã— ${deviceInfo.screen.height}</p>
                        <p><strong>åƒç´ æ¯”:</strong> ${deviceInfo.screen.pixelRatio}</p>
                        <p><strong>æ–¹å‘:</strong> ${deviceInfo.screen.orientation}</p>
                    </div>
                `;
            } catch (error) {
                window.showStatus('deviceInfo', `æ£€æµ‹å¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.checkFeatures = function() {
            const features = {
                'WebGL': window.managers.device.checkFeatureSupport('webgl'),
                'WebGL2': window.managers.device.checkFeatureSupport('webgl2'),
                'WebAssembly': window.managers.device.checkFeatureSupport('webassembly'),
                'Service Worker': window.managers.device.checkFeatureSupport('serviceWorker'),
                'Web Workers': window.managers.device.checkFeatureSupport('webWorkers'),
                'IndexedDB': window.managers.device.checkFeatureSupport('indexedDB'),
                'Local Storage': window.managers.device.checkFeatureSupport('localStorage'),
                'Geolocation': window.managers.device.checkFeatureSupport('geolocation'),
                'Notifications': window.managers.device.checkFeatureSupport('notifications'),
                'Vibration': window.managers.device.checkFeatureSupport('vibration')
            };

            const infoGrid = document.getElementById('deviceInfo');
            const featuresHtml = Object.entries(features)
                .map(([name, supported]) => 
                    `<p><strong>${name}:</strong> ${supported ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ'}</p>`
                ).join('');

            infoGrid.innerHTML = `
                <div class="info-item" style="grid-column: 1 / -1;">
                    <h4>åŠŸèƒ½æ”¯æŒæ£€æµ‹</h4>
                    ${featuresHtml}
                </div>
            `;
        };

        // å‰ªè´´æ¿åŠŸèƒ½
        window.copyText = async function() {
            try {
                const text = document.getElementById('clipboardText').value;
                await window.managers.clipboard.copyText(text);
                window.showStatus('clipboardStatus', 'æ–‡æœ¬å¤åˆ¶æˆåŠŸï¼', 'success');
            } catch (error) {
                window.showStatus('clipboardStatus', `å¤åˆ¶å¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.pasteText = async function() {
            try {
                const text = await window.managers.clipboard.readText();
                document.getElementById('clipboardResult').value = text;
                window.showStatus('clipboardStatus', 'æ–‡æœ¬ç²˜è´´æˆåŠŸï¼', 'success');
            } catch (error) {
                window.showStatus('clipboardStatus', `ç²˜è´´å¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.copyHTML = async function() {
            try {
                const html = '<h3>HTML å†…å®¹</h3><p>è¿™æ˜¯ä¸€æ®µ <strong>HTML</strong> å†…å®¹ã€‚</p>';
                await window.managers.clipboard.copyHTML(html);
                window.showStatus('clipboardStatus', 'HTML å¤åˆ¶æˆåŠŸï¼', 'success');
            } catch (error) {
                window.showStatus('clipboardStatus', `HTML å¤åˆ¶å¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.pasteHTML = async function() {
            try {
                const html = await window.managers.clipboard.readHTML();
                document.getElementById('clipboardResult').value = html;
                window.showStatus('clipboardStatus', 'HTML ç²˜è´´æˆåŠŸï¼', 'success');
            } catch (error) {
                window.showStatus('clipboardStatus', `HTML ç²˜è´´å¤±è´¥: ${error.message}`, 'error');
            }
        };

        // å…¨å±åŠŸèƒ½
        window.requestFullscreen = async function() {
            try {
                const element = document.getElementById('fullscreenDemo');
                await window.managers.fullscreen.request(element);
                updateFullscreenStatus();
            } catch (error) {
                console.error('è¿›å…¥å…¨å±å¤±è´¥:', error);
            }
        };

        window.exitFullscreen = async function() {
            try {
                await window.managers.fullscreen.exit();
                updateFullscreenStatus();
            } catch (error) {
                console.error('é€€å‡ºå…¨å±å¤±è´¥:', error);
            }
        };

        window.toggleFullscreen = async function() {
            try {
                const element = document.getElementById('fullscreenDemo');
                await window.managers.fullscreen.toggle(element);
                updateFullscreenStatus();
            } catch (error) {
                console.error('åˆ‡æ¢å…¨å±å¤±è´¥:', error);
            }
        };

        function updateFullscreenStatus() {
            const status = window.managers.fullscreen.isFullscreen ? 'å…¨å±' : 'éå…¨å±';
            document.getElementById('fullscreenStatus').textContent = `å½“å‰çŠ¶æ€: ${status}`;
        }

        // ç›‘å¬å…¨å±çŠ¶æ€å˜åŒ–
        window.managers.fullscreen.on('change', updateFullscreenStatus);

        // å­—ä½“ç®¡ç†åŠŸèƒ½
        window.checkFonts = async function() {
            try {
                const fonts = ['Arial', 'Helvetica', 'Times New Roman', 'Georgia', 'Verdana', 'Comic Sans MS'];
                const result = await window.managers.font.check(fonts);
                
                const statusHtml = result.allFonts.map(font => 
                    `<p><strong>${font.name}:</strong> ${font.loaded ? 'âœ… å¯ç”¨' : 'âŒ ä¸å¯ç”¨'}</p>`
                ).join('');

                window.showStatus('fontStatus', `
                    <div>
                        <h4>å­—ä½“æ£€æŸ¥ç»“æœ:</h4>
                        ${statusHtml}
                        <p><strong>æ€»è€—æ—¶:</strong> ${result.totalLoadTime}ms</p>
                    </div>
                `, 'info');
            } catch (error) {
                window.showStatus('fontStatus', `å­—ä½“æ£€æŸ¥å¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.loadCustomFont = async function() {
            try {
                // è¿™é‡Œä½¿ç”¨ Google Fonts ä½œä¸ºç¤ºä¾‹
                const fontUrl = 'https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap';
                
                // åˆ›å»º link å…ƒç´ åŠ è½½å­—ä½“
                const link = document.createElement('link');
                link.href = fontUrl;
                link.rel = 'stylesheet';
                document.head.appendChild(link);

                // ç­‰å¾…å­—ä½“åŠ è½½
                await new Promise(resolve => setTimeout(resolve, 1000));

                // æ£€æŸ¥å­—ä½“æ˜¯å¦å¯ç”¨
                const result = await window.managers.font.check('Roboto');
                
                if (result.success) {
                    // æ·»åŠ åˆ°é€‰æ‹©å™¨
                    const select = document.getElementById('fontSelect');
                    const option = document.createElement('option');
                    option.value = 'Roboto';
                    option.textContent = 'Roboto (è‡ªå®šä¹‰)';
                    select.appendChild(option);
                    
                    window.showStatus('fontStatus', 'è‡ªå®šä¹‰å­—ä½“åŠ è½½æˆåŠŸï¼', 'success');
                } else {
                    window.showStatus('fontStatus', 'è‡ªå®šä¹‰å­—ä½“åŠ è½½å¤±è´¥', 'error');
                }
            } catch (error) {
                window.showStatus('fontStatus', `åŠ è½½è‡ªå®šä¹‰å­—ä½“å¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.changeFontDemo = function() {
            const fontName = document.getElementById('fontSelect').value;
            const demo = document.getElementById('fontDemo');
            demo.style.fontFamily = `"${fontName}", sans-serif`;
            demo.textContent = `å­—ä½“æ¼”ç¤ºæ–‡æœ¬ - Font Demo Text (${fontName})`;
        };

        // URL ç®¡ç†åŠŸèƒ½
        window.parseUrl = function() {
            try {
                const urlInput = document.getElementById('urlInput').value;
                const urlManager = new UrlManager(urlInput);
                const info = urlManager.getUrlInfo();
                
                document.getElementById('urlResult').innerHTML = `
                    <h4>URL è§£æç»“æœ:</h4>
                    <pre>${window.formatJSON(info)}</pre>
                `;
            } catch (error) {
                window.showStatus('urlResult', `URL è§£æå¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.addQueryParams = function() {
            try {
                const urlInput = document.getElementById('urlInput').value;
                const urlManager = new UrlManager(urlInput);
                
                urlManager.addQuery({
                    page: 1,
                    limit: 10,
                    sort: 'name',
                    tags: ['javascript', 'web']
                });
                
                document.getElementById('urlInput').value = urlManager.toString();
                window.showStatus('urlResult', 'æŸ¥è¯¢å‚æ•°æ·»åŠ æˆåŠŸï¼', 'success');
            } catch (error) {
                window.showStatus('urlResult', `æ·»åŠ æŸ¥è¯¢å‚æ•°å¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.buildUrl = function() {
            try {
                const urlManager = new UrlManager('https://api.example.com');
                
                urlManager
                    .appendPath('v1')
                    .appendPath('users')
                    .appendPath('123')
                    .addQuery({ 
                        include: ['profile', 'settings'],
                        format: 'json'
                    })
                    .setHash('profile');
                
                document.getElementById('urlInput').value = urlManager.toString();
                window.showStatus('urlResult', 'URL æ„å»ºæˆåŠŸï¼', 'success');
            } catch (error) {
                window.showStatus('urlResult', `URL æ„å»ºå¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.normalizeUrl = function() {
            try {
                const urlInput = document.getElementById('urlInput').value;
                const urlManager = new UrlManager(urlInput);
                
                // æ ‡å‡†åŒ–å¤„ç†
                urlManager.normalize();
                
                document.getElementById('urlInput').value = urlManager.toString();
                window.showStatus('urlResult', 'URL æ ‡å‡†åŒ–æˆåŠŸï¼', 'success');
            } catch (error) {
                window.showStatus('urlResult', `URL æ ‡å‡†åŒ–å¤±è´¥: ${error.message}`, 'error');
            }
        };

        // User Agent è§£æåŠŸèƒ½
        window.parseUserAgent = function() {
            try {
                const ua = UA.parse();
                
                document.getElementById('uaResult').innerHTML = `
                    <h4>User Agent è§£æç»“æœ:</h4>
                    <div class="info-grid">
                        <div class="info-item">
                            <h4>æµè§ˆå™¨</h4>
                            <p><strong>åç§°:</strong> ${ua.browser.name}</p>
                            <p><strong>ç‰ˆæœ¬:</strong> ${ua.browser.version}</p>
                            <p><strong>ä¸»ç‰ˆæœ¬:</strong> ${ua.browser.major}</p>
                        </div>
                        <div class="info-item">
                            <h4>å¼•æ“</h4>
                            <p><strong>åç§°:</strong> ${ua.engine.name}</p>
                            <p><strong>ç‰ˆæœ¬:</strong> ${ua.engine.version}</p>
                        </div>
                        <div class="info-item">
                            <h4>æ“ä½œç³»ç»Ÿ</h4>
                            <p><strong>åç§°:</strong> ${ua.os.name}</p>
                            <p><strong>ç‰ˆæœ¬:</strong> ${ua.os.version}</p>
                        </div>
                        <div class="info-item">
                            <h4>è®¾å¤‡</h4>
                            <p><strong>ç±»å‹:</strong> ${ua.device.type || 'æœªçŸ¥'}</p>
                            <p><strong>å‹å·:</strong> ${ua.device.model || 'æœªçŸ¥'}</p>
                            <p><strong>å‚å•†:</strong> ${ua.device.vendor || 'æœªçŸ¥'}</p>
                        </div>
                    </div>
                `;
            } catch (error) {
                window.showStatus('uaResult', `UA è§£æå¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.checkBrowserCompatibility = function() {
            try {
                const ua = UA.parse();
                
                const checks = [
                    { name: 'Chrome >= 60', condition: 'Chrome >= 60' },
                    { name: 'Firefox >= 55', condition: 'Firefox >= 55' },
                    { name: 'Safari >= 12', condition: 'Safari >= 12' },
                    { name: 'Edge >= 79', condition: 'Edge >= 79' }
                ];
                
                const results = checks.map(check => ({
                    name: check.name,
                    supported: UA.satisfies(ua, check.condition)
                }));
                
                const isModern = UA.isModern(ua);
                
                const resultsHtml = results.map(result => 
                    `<p><strong>${result.name}:</strong> ${result.supported ? 'âœ… å…¼å®¹' : 'âŒ ä¸å…¼å®¹'}</p>`
                ).join('');
                
                document.getElementById('uaResult').innerHTML = `
                    <h4>æµè§ˆå™¨å…¼å®¹æ€§æ£€æŸ¥:</h4>
                    <div class="info-item">
                        <p><strong>ç°ä»£æµè§ˆå™¨:</strong> ${isModern ? 'âœ… æ˜¯' : 'âŒ å¦'}</p>
                        ${resultsHtml}
                    </div>
                `;
            } catch (error) {
                window.showStatus('uaResult', `å…¼å®¹æ€§æ£€æŸ¥å¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.generateUA = function() {
            try {
                const customUA = UA.stringify({
                    browser: {
                        name: 'CustomBrowser',
                        version: '1.0.0'
                    },
                    os: {
                        name: 'CustomOS',
                        version: '2.0'
                    },
                    device: {
                        type: 'mobile',
                        model: 'CustomPhone'
                    }
                });
                
                document.getElementById('uaResult').innerHTML = `
                    <h4>ç”Ÿæˆçš„ User Agent:</h4>
                    <div class="info-item">
                        <p style="word-break: break-all; font-family: monospace; background: #f5f5f5; padding: 10px; border-radius: 4px;">
                            ${customUA}
                        </p>
                    </div>
                `;
            } catch (error) {
                window.showStatus('uaResult', `UA ç”Ÿæˆå¤±è´¥: ${error.message}`, 'error');
            }
        };

        // æ–‡ä»¶å¤„ç†åŠŸèƒ½
        window.processFile = async function() {
            try {
                const fileInput = document.getElementById('fileInput');
                const file = fileInput.files[0];
                
                if (!file) {
                    window.showStatus('fileResult', 'è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ–‡ä»¶', 'error');
                    return;
                }
                
                const result = await window.managers.file.readFile(file);
                
                document.getElementById('fileResult').innerHTML = `
                    <h4>æ–‡ä»¶å¤„ç†ç»“æœ:</h4>
                    <div class="info-item">
                        <p><strong>æ–‡ä»¶å:</strong> ${file.name}</p>
                        <p><strong>æ–‡ä»¶å¤§å°:</strong> ${result.size} å­—èŠ‚</p>
                        <p><strong>æ–‡ä»¶ç±»å‹:</strong> ${result.type}</p>
                        <p><strong>æœ€åä¿®æ”¹:</strong> ${new Date(result.lastModified).toLocaleString()}</p>
                        <p><strong>å†…å®¹é•¿åº¦:</strong> ${result.content.length} å­—ç¬¦</p>
                    </div>
                `;
            } catch (error) {
                window.showStatus('fileResult', `æ–‡ä»¶å¤„ç†å¤±è´¥: ${error.message}`, 'error');
            }
        };

        window.convertToBase64 = async function() {
            try {
                const fileInput = document.getElementById('fileInput');
                const file = fileInput.files[0];
                
                if (!file) {
                    window.showStatus('fileResult', 'è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ–‡ä»¶', 'error');
                    return;
                }
                
                const result = await window.managers.file.fileToBase64(file);
                
                if (result.success) {
                    const preview = result.data.substring(0, 100) + '...';
                    
                    document.getElementById('fileResult').innerHTML = `
                        <h4>Base64 è½¬æ¢ç»“æœ:</h4>
                        <div class="info-item">
                            <p><strong>åŸå§‹å¤§å°:</strong> ${file.size} å­—èŠ‚</p>
                            <p><strong>Base64 å¤§å°:</strong> ${result.data.length} å­—ç¬¦</p>
                            <p><strong>MIME ç±»å‹:</strong> ${result.mimeType}</p>
                            <p><strong>é¢„è§ˆ:</strong></p>
                            <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px; overflow-x: auto; font-size: 12px;">${preview}</pre>
                        </div>
                    `;
                } else {
                    window.showStatus('fileResult', `Base64 è½¬æ¢å¤±è´¥: ${result.error}`, 'error');
                }
            } catch (error) {
                window.showStatus('fileResult', `Base64 è½¬æ¢å¤±è´¥: ${error.message}`, 'error');
            }
        };

        // ç½‘ç»œçŠ¶æ€åŠŸèƒ½
        window.checkNetworkStatus = function() {
            const isOnline = navigator.onLine;
            const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            
            let networkInfo = `
                <h4>ç½‘ç»œçŠ¶æ€:</h4>
                <div class="info-item">
                    <p><strong>åœ¨çº¿çŠ¶æ€:</strong> ${isOnline ? 'âœ… åœ¨çº¿' : 'âŒ ç¦»çº¿'}</p>
            `;
            
            if (connection) {
                networkInfo += `
                    <p><strong>è¿æ¥ç±»å‹:</strong> ${connection.effectiveType || 'æœªçŸ¥'}</p>
                    <p><strong>ä¸‹è¡Œé€Ÿåº¦:</strong> ${connection.downlink || 'æœªçŸ¥'} Mbps</p>
                    <p><strong>å¾€è¿”æ—¶é—´:</strong> ${connection.rtt || 'æœªçŸ¥'} ms</p>
                    <p><strong>çœæµé‡æ¨¡å¼:</strong> ${connection.saveData ? 'âœ… å¼€å¯' : 'âŒ å…³é—­'}</p>
                `;
            } else {
                networkInfo += '<p><em>è¯¦ç»†ç½‘ç»œä¿¡æ¯ä¸å¯ç”¨</em></p>';
            }
            
            networkInfo += '</div>';
            
            document.getElementById('networkStatus').innerHTML = networkInfo;
        };

        window.monitorNetwork = function() {
            let monitoring = false;
            
            function updateNetworkStatus() {
                const status = navigator.onLine ? 'åœ¨çº¿' : 'ç¦»çº¿';
                const timestamp = new Date().toLocaleTimeString();
                
                const statusElement = document.getElementById('networkStatus');
                statusElement.innerHTML += `<p><strong>${timestamp}:</strong> ç½‘ç»œçŠ¶æ€å˜ä¸º ${status}</p>`;
            }
            
            if (!monitoring) {
                window.addEventListener('online', updateNetworkStatus);
                window.addEventListener('offline', updateNetworkStatus);
                monitoring = true;
                
                document.getElementById('networkStatus').innerHTML = `
                    <h4>ç½‘ç»œç›‘æ§å·²å¯åŠ¨</h4>
                    <p>ç½‘ç»œçŠ¶æ€å˜åŒ–å°†åœ¨ä¸‹æ–¹æ˜¾ç¤º...</p>
                `;
            }
        };

        // æ€§èƒ½ç›‘æ§åŠŸèƒ½
        window.runPerformanceTest = async function() {
            const startTime = performance.now();
            
            // æ¨¡æ‹Ÿä¸€äº›æ“ä½œ
            const operations = [];
            
            // æµ‹è¯•å‰ªè´´æ¿æ“ä½œ
            try {
                const clipboardStart = performance.now();
                await window.managers.clipboard.copyText('performance test');
                const clipboardEnd = performance.now();
                operations.push({
                    name: 'å‰ªè´´æ¿å¤åˆ¶',
                    duration: clipboardEnd - clipboardStart,
                    success: true
                });
            } catch (error) {
                operations.push({
                    name: 'å‰ªè´´æ¿å¤åˆ¶',
                    duration: 0,
                    success: false,
                    error: error.message
                });
            }
            
            // æµ‹è¯•è®¾å¤‡æ£€æµ‹
            try {
                const deviceStart = performance.now();
                await window.managers.device.getDeviceInfo();
                const deviceEnd = performance.now();
                operations.push({
                    name: 'è®¾å¤‡æ£€æµ‹',
                    duration: deviceEnd - deviceStart,
                    success: true
                });
            } catch (error) {
                operations.push({
                    name: 'è®¾å¤‡æ£€æµ‹',
                    duration: 0,
                    success: false,
                    error: error.message
                });
            }
            
            // æµ‹è¯•å­—ä½“æ£€æŸ¥
            try {
                const fontStart = performance.now();
                await window.managers.font.check(['Arial', 'Helvetica']);
                const fontEnd = performance.now();
                operations.push({
                    name: 'å­—ä½“æ£€æŸ¥',
                    duration: fontEnd - fontStart,
                    success: true
                });
            } catch (error) {
                operations.push({
                    name: 'å­—ä½“æ£€æŸ¥',
                    duration: 0,
                    success: false,
                    error: error.message
                });
            }
            
            const totalTime = performance.now() - startTime;
            
            const resultsHtml = operations.map(op => `
                <p>
                    <strong>${op.name}:</strong> 
                    ${op.success ? `âœ… ${op.duration.toFixed(2)}ms` : `âŒ ${op.error}`}
                </p>
            `).join('');
            
            document.getElementById('performanceResult').innerHTML = `
                <h4>æ€§èƒ½æµ‹è¯•ç»“æœ:</h4>
                <div class="info-item">
                    ${resultsHtml}
                    <p><strong>æ€»è€—æ—¶:</strong> ${totalTime.toFixed(2)}ms</p>
                </div>
            `;
        };

        window.getMemoryInfo = function() {
            const memory = performance.memory;
            
            if (memory) {
                const formatBytes = (bytes) => {
                    const mb = bytes / (1024 * 1024);
                    return `${mb.toFixed(2)} MB`;
                };
                
                document.getElementById('performanceResult').innerHTML = `
                    <h4>å†…å­˜ä½¿ç”¨æƒ…å†µ:</h4>
                    <div class="info-item">
                        <p><strong>å·²ä½¿ç”¨ JS å †å†…å­˜:</strong> ${formatBytes(memory.usedJSHeapSize)}</p>
                        <p><strong>æ€» JS å †å†…å­˜:</strong> ${formatBytes(memory.totalJSHeapSize)}</p>
                        <p><strong>JS å †å†…å­˜é™åˆ¶:</strong> ${formatBytes(memory.jsHeapSizeLimit)}</p>
                        <p><strong>ä½¿ç”¨ç‡:</strong> ${((memory.usedJSHeapSize / memory.jsHeapSizeLimit) * 100).toFixed(2)}%</p>
                    </div>
                `;
            } else {
                document.getElementById('performanceResult').innerHTML = `
                    <div class="info-item">
                        <p>å†…å­˜ä¿¡æ¯ä¸å¯ç”¨ï¼ˆéœ€è¦ Chrome æµè§ˆå™¨ï¼‰</p>
                    </div>
                `;
            }
        };

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ£€æµ‹è®¾å¤‡ä¿¡æ¯
        window.addEventListener('load', () => {
            window.detectDevice();
            window.checkNetworkStatus();
        });

        // å“åº”å¼å¤„ç†
        function handleResponsive() {
            const isMobile = window.innerWidth <= 768;
            document.body.classList.toggle('mobile-layout', isMobile);
        }

        window.addEventListener('resize', handleResponsive);
        handleResponsive();
    </script>
</body>
</html>